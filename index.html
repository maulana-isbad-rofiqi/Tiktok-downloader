<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok & Instagram Downloader :: No Watermark</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <style>
        :root{--bg-dark:#000;--accent-cyan:#00eaff;--accent-magenta:#ff0077;--card-bg:rgba(10,10,20,0.6);--text-light:#e8e8e8;--text-muted:#888}
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif}
        body{background:#000;color:var(--text-light);min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:40px 20px;position:relative;overflow-x:hidden}
        .background-grid,.starfield{position:fixed;top:0;left:0;right:0;bottom:0;z-index:-2;pointer-events:none}
        .background-grid{background-image:linear-gradient(to right,rgba(0,234,255,0.04)1px,transparent 1px),linear-gradient(to bottom,rgba(0,234,255,0.04)1px,transparent 1px);background-size:60px 60px;animation:grid-pan 80s linear infinite}
        @keyframes grid-pan{from{background-position:0 0}to{background-position:-5000px -5000px}}
        .star{position:absolute;background:white;border-radius:50%;animation:twinkle 5s infinite ease-in-out}
        @keyframes twinkle{0%,100%{opacity:0;transform:scale(0.5)}50%{opacity:1;transform:scale(1)}}
        .holographic-card{background:var(--card-bg);backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border:1px solid rgba(0,234,255,0.25);border-radius:20px;padding:35px;width:100%;max-width:480px;box-shadow:0 20px 50px rgba(0,0,0,0.9),0 0 50px rgba(0,234,255,0.15);margin-bottom:30px}
        .logo-icon{font-size:3.5rem;background:linear-gradient(45deg,var(--accent-cyan),var(--accent-magenta));-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:icon-float 3s infinite alternate;margin-bottom:10px;display:block}
        @keyframes icon-float{0%{transform:translateY(0)}100%{transform:translateY(-5px)}}
        h1{font-family:'Share Tech Mono',monospace;font-size:1.75rem;letter-spacing:3px;background:linear-gradient(90deg,var(--accent-cyan),#fff,var(--accent-magenta));-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:glitch-title 4s infinite;text-align:center}
        @keyframes glitch-title{0%,100%{text-shadow:0 0 10px var(--accent-cyan)}50%{text-shadow:0 0 20px var(--accent-magenta),0 0 30px var(--accent-cyan)}}
        .subtitle{color:var(--text-muted);font-size:0.9rem;margin-top:8px;text-align:center}
        .input-group{position:relative;margin-bottom:25px}
        input{width:100%;padding:16px 60px 16px 20px;background:rgba(0,0,0,0.6);border:1px solid rgba(0,234,255,0.3);border-radius:12px;color:white;font-size:1rem;outline:none}
        .search-button{position:absolute;right:8px;top:8px;bottom:8px;width:48px;border:none;border-radius:10px;background:linear-gradient(45deg,var(--accent-cyan),var(--accent-magenta));color:white;cursor:pointer}
        .progress-bar-container{display:none;height:8px;background:rgba(255,255,255,0.1);border-radius:8px;overflow:hidden;margin:20px 0}
        .progress-bar{height:100%;background:linear-gradient(90deg,var(--accent-cyan),var(--accent-magenta));animation:fill 2s linear infinite alternate}
        @keyframes fill{0%{width:0%}100%{width:100%}}
        .result-area{display:none;margin-top:20px;animation:slideIn 0.5s ease}
        @keyframes slideIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
        .media-player-container, .carousel-grid{border-radius:12px;overflow:hidden;box-shadow:0 0 30px rgba(0,234,255,0.3);margin-bottom:20px;background:black}
        .carousel-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:8px;padding:8px}
        .carousel-item{position:relative;cursor:pointer;overflow:hidden;border-radius:8px}
        .carousel-item img,.carousel-item video{width:100%;height:100%;object-fit:cover;display:block}
        .carousel-item::after{content:'Play';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.7);color:white;padding:4px 8px;border-radius:4px;font-size:0.7rem;opacity:0;transition:0.3s}
        .carousel-item:hover::after{opacity:1}
        .ios-hint{display:none;background:rgba(0,234,255,0.12);border:1px solid var(--accent-cyan);color:var(--accent-cyan);padding:12px;border-radius:10px;margin:15px 0 10px;font-weight:600;text-align:center}
        .download-buttons{display:flex;flex-direction:column;gap:14px}
        .btn-download{position:relative;padding:16px;border-radius:12px;font-weight:700;text-align:center;color:#000;background:linear-gradient(90deg,var(--accent-cyan),var(--accent-magenta));overflow:hidden;transition:all 0.3s;cursor:pointer;border:none;display:flex;align-items:center;justify-content:center;gap:8px}
        .btn-download:hover{transform:translateY(-3px);box-shadow:0 10px 30px rgba(0,234,255,0.4)}
        .btn-all{background:linear-gradient(90deg,#ff0077,var(--accent-magenta))}
        .shine{position:absolute;top:-100%;left:-100%;width:60%;height:200%;background:linear-gradient(120deg,transparent,rgba(255,255,255,0.5),transparent);transform:skew(-20deg);transition:0.8s}
        .btn-download:hover .shine{top:-100%;left:120%}
        .tip-text{margin-top:20px;font-size:0.8rem;color:#666;text-align:center}
        .section-divider{height:1px;background:linear-gradient(90deg,transparent,var(--accent-cyan),var(--accent-magenta),transparent);margin:50px 0}
        .footer{margin-top:50px;font-family:'Share Tech Mono',monospace;color:#666;font-size:0.85rem;letter-spacing:1px;text-align:center}
    </style>
</head>
<body>

    <div class="background-grid"></div>
    <div class="starfield" id="starfield"></div>

    <!-- TIKTOK SECTION (sama seperti sebelumnya) -->
    <div class="holographic-card">
        <div style="text-align:center;margin-bottom:30px">
            <i class="fab fa-tiktok logo-icon"></i>
            <h1>TIKTOK DOWNLOADER</h1>
            <p class="subtitle">Unduh esensi digital tanpa jejak.</p>
        </div>
        <div class="input-group">
            <input type="text" id="tiktokUrlInput" placeholder="Link TikTok..." autocomplete="off">
            <button class="search-button" onclick="fetchTikTok()">Arrow Right</button>
        </div>
        <div class="progress-bar-container" id="tiktokProgress"><div class="progress-bar"></div></div>
        <div id="tiktokError" class="tip-text" style="display:none;color:#ff80a6"></div>
        <div id="tiktokResult" class="result-area">
            <div class="media-player-container"><video id="tiktokPlayer" controls playsinline></video></div>
            <div class="ios-hint" id="tiktokIosHint">iOS: Klik tombol → Save Video</div>
            <div class="download-buttons">
                <button id="tiktokDlVideo" class="btn-download"><span class="shine"></span>Download DOWNLOAD VIDEO</button>
                <button id="tiktokDlAudio" class="btn-download" style="background:rgba(255,255,255,0.12);color:white;border:1px solid rgba(255,255,255,0.2)">Download DOWNLOAD AUDIO</button>
            </div>
        </div>
    </div>

    <div class="section-divider"></div>

    <!-- INSTAGRAM SECTION -->
    <div class="holographic-card">
        <div style="text-align:center;margin-bottom:30px">
            <i class="fab fa-instagram logo-icon"></i>
            <h1>INSTAGRAM DOWNLOADER</h1>
            <p class="subtitle">Video, foto, reels, carousel, story (public).</p>
        </div>
        <div class="input-group">
            <input type="text" id="igUrlInput" placeholder="Link Instagram..." autocomplete="off">
            <button class="search-button" onclick="fetchInstagram()">Arrow Right</button>
        </div>
        <div class="progress-bar-container" id="igProgress"><div class="progress-bar"></div></div>
        <div id="igError" class="tip-text" style="display:none;color:#ff80a6"></div>
        <div id="igResult" class="result-area">
            <div class="meta-container" style="margin-bottom:15px">
                <div class="author-box">
                    <img id="igAvatar" class="author-avatar" src="">
                    <div><h3 id="igUsername" class="author-name">@unknown</h3></div>
                </div>
            </div>
            <div id="igCarousel" class="carousel-grid"></div>
            <div class="ios-hint" id="igIosHint">iOS: Klik tombol → Save ke Photos</div>
            <div class="download-buttons">
                <button id="igDlAll" class="btn-download btn-all"><span class="shine"></span>Download DOWNLOAD ALL (ZIP)</button>
            </div>
            <p class="tip-text">Atau klik thumbnail untuk download satu per satu</p>
        </div>
    </div>

    <div class="footer">© 2025 CODED BY Itsbad</div>

    <script>
        // Starfield
        for(let i=0;i<120;i++){
            let s=document.createElement('div');s.className='star';
            s.style.width=s.style.height=Math.random()*3+1+'px';
            s.style.top=Math.random()*100+'%';s.style.left=Math.random()*100+'%';
            s.style.animationDelay=Math.random()*5+'s';
            document.getElementById('starfield').appendChild(s);
        }

        // TikTok (ringkas, sama seperti sebelumnya)
        async function fetchTikTok(){
            const url=document.getElementById('tiktokUrlInput').value.trim();
            if(!url)return;
            document.getElementById('tiktokProgress').style.display='block';
            document.getElementById('tiktokResult').style.display='none';
            try{
                const r=await fetch(`https://www.tikwm.com/api/?url=${encodeURIComponent(url)}`);
                const d=await r.json();
                if(d.code===0){
                    const fix=l=>l&&(l.startsWith('http')?l:'https://www.tikwm.com'+l);
                    window.ttVid=fix(d.data.play); window.ttAud=fix(d.data.music);
                    document.getElementById('tiktokPlayer').src=window.ttVid;
                    document.getElementById('tiktokResult').style.display='block';
                    if(/iPad|iPhone|iPod/.test(navigator.userAgent)) document.getElementById('tiktokIosHint').style.display='block';
                }
            }catch{e=>document.getElementById('tiktokError').innerText='Link TikTok salah!';document.getElementById('tiktokError').style.display='block';}
            finally{document.getElementById('tiktokProgress').style.display='none';}
        }
        document.getElementById('tiktokDlVideo').onclick=()=>downloadFile(window.ttVid,'tiktok_video.mp4',true);
        document.getElementById('tiktokDlAudio').onclick=()=>downloadFile(window.ttAud,'tiktok_audio.mp3',false);

        // Instagram + Carousel Full
        async function fetchInstagram(){
            const url=document.getElementById('igUrlInput').value.trim();
            if(!url)return;
            document.getElementById('igProgress').style.display='block';
            document.getElementById('igResult').style.display='none';
            document.getElementById('igCarousel').innerHTML='';
            try{
                const r=await fetch(`https://api.igram.world/api/v1/download?url=${encodeURIComponent(url)}`);
                const d=await r.json();
                if(d.status==='ok' && d.data){
                    const items = d.data.resources || [{url: d.data.url, type: d.data.type==='video'?'video':'image'}];
                    window.igFiles = items.map((x,i)=>({url:x.url,type:x.type||'image',index:i+1}));
                    document.getElementById('igAvatar').src=d.data.thumb||'';
                    document.getElementById('igUsername').innerText='@'+(d.data.author?.username||'unknown');
                    const grid=document.getElementById('igCarousel');
                    window.igFiles.forEach(item=>{
                        const div=document.createElement('div');div.className='carousel-item';
                        if(item.type==='video'){
                            const vid=document.createElement('video');
                            vid.src=item.url;vid.poster=d.data.thumb;
                            div.appendChild(vid);
                            div.onclick=()=>downloadFile(item.url,`ig_${item.index}.mp4`,true);
                        }else{
                            const img=document.createElement('img');
                            img.src=item.url;
                            div.appendChild(img);
                            div.onclick=()=>downloadFile(item.url,`ig_${item.index}.jpg`,false);
                        }
                        grid.appendChild(div);
                    });
                    document.getElementById('igResult').style.display='block';
                    if(/iPad|iPhone|iPod/.test(navigator.userAgent)) document.getElementById('igIosHint').style.display='block';
                }
            }catch{
                document.getElementById('igError').innerText='Link Instagram tidak valid / private!';
                document.getElementById('igError').style.display='block';
            }finally{
                document.getElementById('igProgress').style.display='none';
            }
        }

        // Download All ZIP
        document.getElementById('igDlAll').onclick=async()=>{
            if(!window.igFiles||window.igFiles.length===0)return alert('Tidak ada file!');
            const zip=new JSZip();
            const promises=window.igFiles.map(async(item,i)=>{
                const r=await fetch(item.url);
                const blob=await r.blob();
                const ext=item.type==='video'?'mp4':'jpg';
                zip.file(`ig_\( {i+1}. \){ext}`,blob);
            });
            await Promise.all(promises);
            const content=await zip.generateAsync({type:'blob'});
            const a=document.createElement('a');
            a.href=URL.createObjectURL(content);
            a.download='instagram_carousel.zip';
            a.click();
            URL.revokeObjectURL(a.href);
        };

        // Universal download (iOS Share + normal)
        async function downloadFile(url,name,isVideo=true){
            try{
                const r=await fetch(url);
                const blob=await r.blob();
                if(isVideo && navigator.share && /iPad|iPhone|iPod/.test(navigator.userAgent)){
                    const file=new File([blob],name,{type:blob.type});
                    await navigator.share({files:[file]});
                }else{
                    const a=document.createElement('a');
                    a.href=URL.createObjectURL(blob);
                    a.download=name;a.click();
                    URL.revokeObjectURL(a.href);
                }
            }catch{alert('Gagal download. Coba long-press media!');}
        }

        // Enter key
        ['tiktokUrlInput','igUrlInput'].forEach(id=>document.getElementById(id).addEventListener('keypress',e=>e.key==='Enter'&&(id==='tiktokUrlInput'?fetchTikTok():fetchInstagram())));
    </script>
</body>
</html>
