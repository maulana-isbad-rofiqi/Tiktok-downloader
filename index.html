<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok Downloader :: Download Video TikTok Tanpa Watermark</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --bg-dark: #000000;
            --accent-cyan: #00eaff;
            --accent-magenta: #ff0077;
            --card-bg: rgba(10, 10, 20, 0.6);
            --border-glow: rgba(0, 234, 255, 0.3);
            --text-light: #e8e8e8;
            --text-muted: #888;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }

        body {
            background: #000000;
            color: var(--text-light);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 20px;
            position: relative;
            overflow-x: hidden;
        }

        .background-grid, .starfield {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: -2;
            pointer-events: none;
        }

        .background-grid {
            background-image:
                linear-gradient(to right, rgba(0, 234, 255, 0.04) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(0, 234, 255, 0.04) 1px, transparent 1px);
            background-size: 60px 60px;
            animation: grid-pan 80s linear infinite;
        }

        @keyframes grid-pan {
            from { background-position: 0 0; }
            to { background-position: -5000px -5000px; }
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 5s infinite ease-in-out;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1); }
        }

        .holographic-card {
            background: var(--card-bg);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(0, 234, 255, 0.25);
            border-radius: 20px;
            padding: 35px;
            width: 100%;
            max-width: 480px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.9), 0 0 50px rgba(0, 234, 255, 0.15);
            animation: card-appear 1s ease;
        }

        @keyframes card-appear {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .logo-icon {
            font-size: 3.5rem;
            background: linear-gradient(45deg, var(--accent-cyan), var(--accent-magenta));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: icon-float 3s infinite alternate;
            margin-bottom: 10px;
            display: block;
        }

        @keyframes icon-float {
            0% { transform: translateY(0); }
            100% { transform: translateY(-5px); }
        }

        h1 {
            font-family: 'Share Tech Mono', monospace;
            font-size: 1.75rem;
            letter-spacing: 3px;
            background: linear-gradient(90deg, var(--accent-cyan), #fff, var(--accent-magenta));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: glitch-title 4s infinite;
            text-align: center;
        }

        @keyframes glitch-title {
            0%, 100% { text-shadow: 0 0 10px var(--accent-cyan); }
            50% { text-shadow: 0 0 20px var(--accent-magenta), 0 0 30px var(--accent-cyan); }
            2%, 98% { transform: translate(0); }
            1%, 99% { transform: translate(-1px, 1px); }
        }

        .subtitle {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-top: 8px;
            text-align: center;
        }

        .input-group {
            position: relative;
            margin-bottom: 25px;
        }

        input {
            width: 100%;
            padding: 16px 60px 16px 20px;
            background: rgba(0,0,0,0.6);
            border: 1px solid rgba(0,234,255,0.3);
            border-radius: 12px;
            color: white;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s;
        }

        input:focus {
            border-color: var(--accent-cyan);
        }

        .search-button {
            position: absolute;
            right: 8px; top: 8px; bottom: 8px;
            width: 48px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(45deg, var(--accent-cyan), var(--accent-magenta));
            color: white;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .search-button:hover:not(:disabled) {
            transform: scale(1.05);
        }

        .search-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .progress-bar-container {
            display: none;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-magenta));
            animation: fill 2s linear infinite alternate;
        }

        @keyframes fill { 0% { width: 0%; } 100% { width: 100%; } }

        #errorMsg {
            display: none;
            color: #ff80a6;
            background: rgba(255,0,119,0.15);
            padding: 12px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        #resultArea {
            display: none;
            margin-top: 20px;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .meta-container {
            background: rgba(0,0,0,0.5);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .author-box {
            display: flex;
            align-items: center;
            gap: 12px;
            padding-bottom: 10px;
            border-bottom: 1px dashed rgba(0,234,255,0.2);
            margin-bottom: 10px;
        }

        .author-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 2px solid var(--accent-cyan);
            object-fit: cover;
        }

        .author-name {
            margin: 0;
            color: white;
            font-weight: 600;
        }

        .video-desc {
            margin: 4px 0 0;
            font-size: 0.85rem;
            color: #aaa;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 12px;
        }

        .stat-item {
            background: rgba(0,0,0,0.4);
            padding: 8px;
            border-radius: 8px;
            text-align: center;
            font-size: 0.8rem;
        }

        .stat-icon {
            color: var(--accent-magenta);
            font-size: 1rem;
        }

        .stat-value {
            font-weight: 700;
            color: var(--accent-cyan);
            display: block;
            margin: 4px 0;
        }

        .video-player-container {
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(0,234,255,0.3);
            margin-bottom: 20px;
            background: black;
        }

        #videoPlayer {
            width: 100%;
            height: auto;
            display: block;
        }

        .ios-hint {
            display: none;
            background: rgba(0, 234, 255, 0.12);
            border: 1px solid var(--accent-cyan);
            color: var(--accent-cyan);
            padding: 12px;
            border-radius: 10px;
            margin: 15px 0 10px;
            font-weight: 600;
            text-align: center;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        .download-buttons {
            display: flex;
            flex-direction: column;
            gap: 14px;
        }

        .btn-download {
            position: relative;
            padding: 16px;
            border-radius: 12px;
            font-weight: 700;
            text-align: center;
            text-decoration: none;
            color: #000;
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-magenta));
            overflow: hidden;
            transition: all 0.3s;
            cursor: pointer;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-download:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 234, 255, 0.4);
        }

        .btn-download:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-audio {
            background: rgba(255,255,255,0.12);
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .shine {
            position: absolute;
            top: -100%;
            left: -100%;
            width: 60%;
            height: 200%;
            background: linear-gradient(120deg, transparent, rgba(255,255,255,0.5), transparent);
            transform: skew(-20deg);
            transition: 0.8s;
        }

        .btn-download:hover .shine {
            top: -100%;
            left: 120%;
        }

        .tip-text {
            margin-top: 20px;
            font-size: 0.8rem;
            color: #666;
            text-align: center;
        }

        .footer {
            margin-top: 50px;
            font-family: 'Share Tech Mono', monospace;
            color: #666;
            font-size: 0.85rem;
            letter-spacing: 1px;
            text-align: center;
        }
    </style>
</head>
<body>

    <div class="background-grid"></div>
    <div class="starfield" id="starfield"></div>

    <div class="holographic-card">
        <div style="text-align: center; margin-bottom: 30px;">
            <i class="fab fa-tiktok logo-icon"></i>
            <h1>TIKTOK DOWNLOADER</h1>
            <p class="subtitle">Unduh esensi digital tanpa jejak.</p>
        </div>

        <div class="input-group">
            <input type="text" id="urlInput" placeholder="Sematkan data link di sini..." autocomplete="off">
            <button class="search-button" id="searchBtn" onclick="fetchVideo()">
                <i class="fas fa-arrow-right"></i>
            </button>
        </div>

        <div class="progress-bar-container" id="progressBarContainer">
            <div class="progress-bar"></div>
        </div>

        <div id="errorMsg"></div>

        <div id="resultArea">
            <div class="meta-container">
                <div class="author-box">
                    <img src="" id="avatar" class="author-avatar" alt="Author">
                    <div>
                        <h3 id="username" class="author-name">@UNKNOWN</h3>
                        <p id="description" class="video-desc">Memuat data...</p>
                    </div>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <i class="fas fa-eye stat-icon"></i>
                        <span id="statViews" class="stat-value">0</span>
                        <span>Views</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-heart stat-icon"></i>
                        <span id="statLikes" class="stat-value">0</span>
                        <span>Likes</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-comment-dots stat-icon"></i>
                        <span id="statComments" class="stat-value">0</span>
                        <span>Comments</span>
                    </div>
                </div>
            </div>

            <div class="video-player-container">
                <video id="videoPlayer" controls playsinline referrerpolicy="no-referrer"></video>
            </div>

            <div class="ios-hint" id="iosHint">
                üì± iOS: Klik tombol di bawah untuk save langsung ke Photos, atau long-press video > "Save Video".
            </div>

            <div class="download-buttons">
                <button id="dlVideo" class="btn-download">
                    <span class="shine"></span>
                    <i class="fas fa-download"></i> DOWNLOAD VIDEO (.MP4)
                </button>
                <button id="dlAudio" class="btn-download btn-audio">
                    <span class="shine"></span>
                    <i class="fas fa-music"></i> DOWNLOAD AUDIO (.MP3)
                </button>
            </div>

            <p class="tip-text">
                ‚ö†Ô∏è Jika gagal, long-press video player > Download. No watermark guaranteed!
            </p>
        </div>
    </div>

    <div class="footer">
        ¬© 2025 CODED BY „ÄêÔªø ùïÄùï•ùï§ùïìùïíùïï  „Äë
    </div>

    <script>
        // Starfield
        const starfield = document.getElementById('starfield');
        for (let i = 0; i < 120; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.width = star.style.height = `${Math.random() * 3 + 1}px`;
            star.style.top = `${Math.random() * 100}%`;
            star.style.left = `${Math.random() * 100}%`;
            star.style.animationDelay = `${Math.random() * 5}s`;
            starfield.appendChild(star);
        }

        // Fetch Video
        async function fetchVideo() {
            const urlInput = document.getElementById('urlInput').value.trim();
            if (!urlInput) return;

            const searchBtn = document.getElementById('searchBtn');
            const progressBarContainer = document.getElementById('progressBarContainer');
            const resultArea = document.getElementById('resultArea');
            const errorMsg = document.getElementById('errorMsg');

            searchBtn.disabled = true;
            progressBarContainer.style.display = 'block';
            resultArea.style.display = 'none';
            errorMsg.style.display = 'none';

            try {
                const apiUrl = `https://www.tikwm.com/api/?url=${encodeURIComponent(urlInput)}`;
                const response = await fetch(apiUrl);
                const data = await response.json();

                if (data.code === 0 && data.data) {
                    const videoData = data.data;
                    const domain = "https://www.tikwm.com";

                    // Fix URLs
                    const fixUrl = (link) => link && (link.startsWith('http') ? link : domain + link);
                    window.videoUrl = fixUrl(videoData.play);
                    window.audioUrl = fixUrl(videoData.music);

                    // Render Meta
                    document.getElementById('avatar').src = fixUrl(videoData.author.avatar) || 'https://via.placeholder.com/45/333/FFF?text=NA';
                    document.getElementById('username').innerText = videoData.author.nickname || 'UNKNOWN ENTITY';
                    document.getElementById('description').innerText = videoData.title || '[NO DATA]';

                    // Animate Stats
                    animateNumber('statViews', videoData.play_count || 0);
                    animateNumber('statLikes', videoData.digg_count || 0);
                    animateNumber('statComments', videoData.comment_count || 0);

                    // Video Player (use original URL for preview)
                    const videoPlayer = document.getElementById('videoPlayer');
                    videoPlayer.src = window.videoUrl;
                    videoPlayer.load();

                    // iOS Detection & Hint
                    const isIos = /iPad|iPhone|iPod/.test(navigator.userAgent);
                    if (isIos) {
                        document.getElementById('iosHint').style.display = 'block';
                    }

                    resultArea.style.display = 'block';
                } else {
                    throw new Error('Invalid TikTok link');
                }
            } catch (error) {
                console.error(error);
                errorMsg.innerText = 'Error: Link tidak valid atau server bermasalah. Coba link TikTok lain.';
                errorMsg.style.display = 'block';
            } finally {
                searchBtn.disabled = false;
                progressBarContainer.style.display = 'none';
            }
        }

        // Enter Key Support
        document.getElementById('urlInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') fetchVideo();
        });

        // Blob Download Function (SnapTik-style for iOS)
        async function downloadFile(url, filename, isVideo = true) {
            try {
                const response = await fetch(url, { method: 'GET' });
                if (!response.ok) throw new Error('Fetch failed');
                const blob = await response.blob();
                const blobUrl = URL.createObjectURL(blob);

                if (isVideo && navigator.share && /iPad|iPhone|iPod/.test(navigator.userAgent)) {
                    // iOS Share (like SnapTik)
                    const file = new File([blob], filename, { type: blob.type });
                    await navigator.share({
                        files: [file],
                        title: 'TikTok Video Download',
                        text: 'Save this watermark-free video!'
                    });
                } else {
                    // Standard Download
                    const a = document.createElement('a');
                    a.href = blobUrl;
                    a.download = filename;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                }

                URL.revokeObjectURL(blobUrl);
            } catch (error) {
                console.error('Download failed:', error);
                alert('Download gagal. Coba long-press video untuk save manual.');
            }
        }

        // Button Listeners
        document.getElementById('dlVideo').addEventListener('click', () => {
            if (window.videoUrl) {
                downloadFile(window.videoUrl, `tiktok_video_${Date.now()}.mp4`, true);
            }
        });

        document.getElementById('dlAudio').addEventListener('click', () => {
            if (window.audioUrl) {
                downloadFile(window.audioUrl, `tiktok_audio_${Date.now()}.mp3`, false);
            }
        });

        // Number Animation
        function animateNumber(elementId, targetValue) {
            const element = document.getElementById(elementId);
            let startValue = 0;
            const duration = 1000;
            let startTime = null;

            function easeOutQuad(t) { return t * t; }

            function animate(currentTime) {
                if (!startTime) startTime = currentTime;
                const progress = Math.min((currentTime - startTime) / duration, 1);
                const easedProgress = easeOutQuad(progress);
                const currentValue = Math.floor(startValue + easedProgress * (targetValue - startValue));
                element.innerText = formatLargeNumber(currentValue);

                if (progress < 1) requestAnimationFrame(animate);
            }
            requestAnimationFrame(animate);
        }

        function formatLargeNumber(num) {
            if (num >= 1e9) return (num / 1e9).toFixed(1).replace(/\.0$/, '') + 'B';
            if (num >= 1e6) return (num / 1e6).toFixed(1).replace(/\.0$/, '') + 'M';
            if (num >= 1e3) return (num / 1e3).toFixed(1).replace(/\.0$/, '') + 'K';
            return num;
        }
    </script>
</body>
</html>
